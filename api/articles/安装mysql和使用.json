{"title":"安装mysql和使用","slug":"安装mysql和使用","date":"2017-03-07T03:31:24.502Z","updated":"2017-03-07T03:30:58.632Z","comments":true,"excerpt":"","content":"<h2 id=\"mysql\"><a href=\"#mysql\" class=\"headerlink\" title=\"mysql\"></a>mysql</h2><h3 id=\"下载mysqli\"><a href=\"#下载mysqli\" class=\"headerlink\" title=\"下载mysqli\"></a>下载mysqli</h3><pre><code>地址：https://dev.mysql.com/downloads/mysql/\n</code></pre><h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><pre><code>打开mysql的安装目录（mysql-5.7.17-winx64），复制一份 my-default.ini\n并将其改名为my.ini 打开my.in文件修改如以下内容\n</code></pre><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">basedir</span> = C:\\wbroot\\mysql-<span class=\"number\">5.7</span>.<span class=\"number\">17</span>-winx64</div><div class=\"line\"><span class=\"attr\">datadir</span> = C:\\wbroot\\mysql-<span class=\"number\">5.7</span>.<span class=\"number\">17</span>-winx64\\data</div><div class=\"line\"><span class=\"attr\">port</span> = <span class=\"number\">3306</span></div></pre></td></tr></table></figure>\n<pre><code>注意：路径根据mysqli安装路径来决定\n</code></pre><h3 id=\"配置环境变量\"><a href=\"#配置环境变量\" class=\"headerlink\" title=\"配置环境变量\"></a>配置环境变量</h3><pre><code>在系统属性中的 path 中输入mysqli 安装的目录文件中bin的路径\n启动管理员 并输入 mysqld -install 成功后输入net start mysql\n显示启动成功。\n</code></pre><h3 id=\"安装mysqli\"><a href=\"#安装mysqli\" class=\"headerlink\" title=\"安装mysqli\"></a>安装mysqli</h3><pre><code>1.打开mysqli 命令 net start mysql\n2.关闭mysqli 命令 net stop mysql\n</code></pre><h3 id=\"登录mysql\"><a href=\"#登录mysql\" class=\"headerlink\" title=\"登录mysql\"></a>登录mysql</h3><pre><code>1. mysqli -u root -p\n2.设置密码 mysqladmin -u root password &quot;设置密码&quot;;\n</code></pre><h3 id=\"mysql数据库相关操作\"><a href=\"#mysql数据库相关操作\" class=\"headerlink\" title=\"mysql数据库相关操作\"></a>mysql数据库相关操作</h3><pre><code>1.查看数据库 show databases;\n2.创建一个数据库 create database 数据库名; 例creata database book;\n3.删除一个数据库 drop database 数据库名;   例drop database book;\n4.使用数据库 use 数据库名  例use book;\n5.删除数据表 drop table 表名;\n6.删除所有数据 delete from user;\n</code></pre><h3 id=\"mysql数据表的相关操作\"><a href=\"#mysql数据表的相关操作\" class=\"headerlink\" title=\"mysql数据表的相关操作\"></a>mysql数据表的相关操作</h3><pre><code>1.创建表 create table book_version(id int,name varchar(20));\n2.查看数据表 show sables;\n3.查看表结构 desc user(表名);\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| id    | int(11)     | YES  |     | NULL    |       |\n| name  | varchar(20) | YES  |     | NULL    |       |\n| sex   | char(1)     | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\nField：字段\nType：类型\nNull：是否允许存储为空\nKey：是否设置主键或外键\nDefault：默认\nExtra：附加消息\n\n补充：\n一张表中只能有一个主键\n\n4.查看表的详细信息 show create table `user\\G`; 加上\\G更容易查看详细信息\n\n5.查询数据 select * form user;\n6.向表中插入数据  insert into user(name) values(&quot;jack&quot;);\n7.向表中插入多列数据 insert into user(id,name,age) values(1,&quot;jack&quot;,16);\n8.消除记录中的重复数据 select distinct name from user;\n9.from子句，限定的表名 select `Name` from world.user;\n10.from子句，未限定的表名 select `Name` from user;\n11.修改表中的数据 update user set age=25,name=&quot;Tam&quot; where id=2;(修改id=2的age和name字段的数据)\n12.删除表中的数据 delete from user where id=1 and id=2;(删除id为1和2的表中数据)\n13.删除表中所有数据 delete from user;\n14.查询表中数据 select * from 表名 where 字段名\n15.从下标1开始查找3个记录 select * from user limit 1,3\n16.查询表里有多少条记录 select count(*) from user; \n\n在有聚合函数的情况下使用的判断语句having\n分组查询每个组的最高成绩 select c_name,max(grade) from score group by c_name;\n分组查询每个组的平均成绩 select c_name,avg(grade) as avg_grade(as avg_grade:别名) from score group by c_name;\nunion\n</code></pre><h4 id=\"4-3-order-by语句\"><a href=\"#4-3-order-by语句\" class=\"headerlink\" title=\"4.3 order by语句\"></a>4.3 order by语句</h4><pre><code>1.order by 表名 asc|desc; //order by默认是升序的为asc，降序为desc\n如：select * from user order by name desc;设置使用name排序,方式为降序 \n</code></pre><h3 id=\"5-修改数据表结构\"><a href=\"#5-修改数据表结构\" class=\"headerlink\" title=\"5.修改数据表结构\"></a>5.修改数据表结构</h3><pre><code>+ 将id改成int(10) 修改指定字段的数据类型: alter table `user` modify `id` int(10);\n+ 将增加一个age字段 alter table user add `age` int(2);\n+ 将id设为主键 alter table user add primary key (id);\n+ 将id设为唯一字段 alter table user add unique (id);\n</code></pre><h3 id=\"mysql支持的存储引擎\"><a href=\"#mysql支持的存储引擎\" class=\"headerlink\" title=\"mysql支持的存储引擎\"></a>mysql支持的存储引擎</h3><pre><code>1.Myisan\n2.InnoDB 主要使用这2个\n</code></pre><h3 id=\"mysql忘记root密码\"><a href=\"#mysql忘记root密码\" class=\"headerlink\" title=\"mysql忘记root密码\"></a>mysql忘记root密码</h3><pre><code>1. 在DOS窗口下输入`net stop mysql` \n2. 开一个DOS窗口，这个需要切换到mysql的bin目录\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysqld --skip-grant-tables;</div></pre></td></tr></table></figure>\n\n不要关闭窗口\n3. 再开一个DOS窗口，`mysql -u root` \n4. 输入\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">use mysql </div><div class=\"line\">update mysql.user set authentication_string=password(&apos;123qwe&apos;) where user=&apos;root&apos; and Host = &apos;localhost&apos;; </div><div class=\"line\">flush privileges; </div><div class=\"line\">exit</div></pre></td></tr></table></figure>\n\n5. 使用任务管理器，找到mysqld-nt的进程，结束进程\n</code></pre><h3 id=\"聚合函数\"><a href=\"#聚合函数\" class=\"headerlink\" title=\"聚合函数\"></a>聚合函数</h3><pre><code>函数名称                    函数作用\nmin(filede_name)           求字段的最小值\nmax(filede_name)           求字段的最大值\n</code></pre><h3 id=\"学生表相关查询\"><a href=\"#学生表相关查询\" class=\"headerlink\" title=\"学生表相关查询\"></a>学生表相关查询</h3><ol>\n<li>查询student表的所有记录</li>\n</ol>\n<ul>\n<li>select * from student;</li>\n</ul>\n<ol>\n<li>查询student表的第2条到4条selec记录</li>\n</ol>\n<ul>\n<li>select * from student limit 1,3;</li>\n</ul>\n<ol>\n<li>从student表查询所有学生的学号（id）、姓名（name）和院系（department）的信息</li>\n</ol>\n<ul>\n<li>select id,name,department from student;</li>\n</ul>\n<ol>\n<li>从student表中查询slex计算机系和英语系的学生的信息</li>\n</ol>\n<ul>\n<li>select * from student where department=”计算机系” or department=”英语系”;</li>\n</ul>\n<ol>\n<li>从student表中查询年龄18~22岁的学生信息</li>\n</ol>\n<ul>\n<li>select * from student where birth&lt;=1999 and birth&gt;=1995;</li>\n</ul>\n<ol>\n<li>从score表中查询每个科目的最高分</li>\n</ol>\n<ul>\n<li>select c_name,grade from score group by c_name;</li>\n</ul>\n<ol>\n<li>查询都是湖南的学生的姓名、年龄、院系和考试科目及成绩</li>\n</ol>\n<ul>\n<li>select student.id,name,address,birth,department,c_name,grade from student,score </li>\n<li>where student.address like”湖南%” and student.id=score.stu_id;</li>\n</ul>\n<ol>\n<li>查询计算机成绩低于95的学生信息</li>\n</ol>\n<ul>\n<li>SELECT * FROM student WHERE id IN (SELECT stu_id FROM score WHERE c_name =”计算机” and grade&lt;95);</li>\n</ul>\n<ol>\n<li>查询每个科目的最高成绩</li>\n</ol>\n<ul>\n<li>select c_name,max(grade) from score group by c_name;</li>\n</ul>\n","categories":[],"tags":[]}